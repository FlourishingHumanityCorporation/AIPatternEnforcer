{
  "version": "1.0",
  "description": "Rules for AI context optimization and management",
  "include": {
    "file_patterns": [
      "src/**/*.ts",
      "src/**/*.tsx",
      "src/**/*.js",
      "src/**/*.jsx",
      "*.md",
      "package.json",
      "tsconfig.json"
    ],
    "recent_files": {
      "enabled": true,
      "days": 7,
      "weight": 1.5
    },
    "staged_files": {
      "enabled": true,
      "weight": 2
    },
    "frequently_imported": {
      "enabled": true,
      "min_imports": 3,
      "weight": 1.3
    },
    "open_in_editor": {
      "enabled": true,
      "weight": 2.5
    }
  },
  "exclude": {
    "file_patterns": [
      "**/*.test.ts",
      "**/*.test.tsx",
      "**/*.spec.ts",
      "**/*.spec.tsx",
      "**/*.stories.tsx",
      "**/node_modules/**",
      "**/dist/**",
      "**/build/**",
      "**/.next/**",
      "**/coverage/**",
      "**/*.min.js",
      "**/*.bundle.js"
    ],
    "large_files": {
      "enabled": true,
      "max_size_kb": 100
    },
    "generated_files": {
      "enabled": true,
      "patterns": [
        "*.generated.*",
        "*.auto.*",
        "*-lock.json",
        "*.lock"
      ]
    }
  },
  "limits": {
    "max_context_tokens": 32000,
    "max_files": 50,
    "max_file_tokens": 4000,
    "target_utilization": 0.8
  },
  "extraction": {
    "mode": "smart",
    "include_imports": true,
    "include_exports": true,
    "include_types": true,
    "include_interfaces": true,
    "include_function_signatures": true,
    "include_class_structure": true,
    "include_constants": true,
    "exclude_implementation_details": true,
    "exclude_comments": false
  },
  "relevance_scoring": {
    "base_score": 50,
    "factors": {
      "recently_modified": 30,
      "in_staging": 40,
      "in_recent_commits": 20,
      "high_import_count": 10,
      "in_error_stack": 50,
      "manually_specified": 100
    },
    "threshold": 70
  },
  "output": {
    "format": "markdown",
    "include_metadata": true,
    "group_by": "relevance",
    "syntax_highlighting": true,
    "include_file_tree": true,
    "include_git_status": true
  },
  "caching": {
    "enabled": true,
    "ttl_minutes": 30,
    "invalidate_on_change": true,
    "cache_extracted_content": true
  },
  "presets": {
    "debugging": {
      "limits": {
        "max_context_tokens": 16000
      },
      "include": {
        "recent_files": {
          "days": 1
        }
      },
      "relevance_scoring": {
        "factors": {
          "in_error_stack": 80
        }
      }
    },
    "feature_development": {
      "limits": {
        "max_context_tokens": 24000
      },
      "extraction": {
        "include_implementation_details": false
      }
    },
    "code_review": {
      "include": {
        "staged_files": {
          "weight": 3
        }
      },
      "extraction": {
        "include_implementation_details": true
      }
    },
    "documentation": {
      "extraction": {
        "exclude_implementation_details": true
      },
      "output": {
        "include_file_tree": true
      }
    }
  }
}
